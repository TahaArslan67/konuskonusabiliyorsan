<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hesabım · KonusKonusabilirsen</title>
  <link rel="stylesheet" href="/styles.css" />
  <script>
    // Require login
    try{
      const token = localStorage.getItem('hk_token');
      if (!token){
        const redirect = encodeURIComponent('/account.html');
        window.location.replace(`/?auth=1&redirect=${redirect}`);
      }
    }catch{}
  </script>
  <script src="/site.js" type="module"></script>
</head>
<body>
  <script src="/header.js"></script>

  <main class="container" style="padding:24px 0 40px; max-width:900px;">
    <div class="card" style="padding:18px;">
      <h2 style="margin:0 0 8px;">Hesabım</h2>
      <div class="row" style="gap:8px; flex-wrap:wrap;">
        <span class="pill" id="accEmail">-</span>
      </div>

    <div class="card" style="padding:16px; margin-top:16px;">
      <h3 style="margin:0 0 8px;">Plan</h3>
      <div class="row" style="gap:8px; flex-wrap:wrap; align-items:center;">
        <span class="pill">Aktif Plan: <strong id="planText">-</strong></span>
        <a class="btn btn-secondary btn-sm" href="/#pricing">Planı Yönet</a>
      </div>
    </div>
    </div>

    <div class="grid" style="grid-template-columns: 1fr 1fr; gap:16px; margin-top:16px;">
      <div class="card" style="padding:16px;">
        <h3 style="margin:0 0 8px;">Kullanım</h3>
        <div class="row" style="gap:8px; flex-wrap:wrap;">
          <span class="pill" id="accUsageDaily">Günlük: -</span>
          <span class="pill" id="accUsageMonthly">Aylık: -</span>
        </div>
      </div>
      <div class="card" style="padding:16px;">
        <h3 style="margin:0 0 8px;">Seviye</h3>
        <div class="row" style="gap:8px; flex-wrap:wrap; align-items:center;">
          <span class="pill">Seviyeniz: <strong id="levelText">-</strong></span>
          <a class="btn btn-secondary btn-sm" href="/placement.html?redirect=%2Faccount.html">Seviye Testini Yenile</a>
        </div>
      </div>
    </div>

    <!-- Learning Plan -->
    <div class="card" style="padding:16px; margin-top:16px;">
      <div class="row" style="justify-content:space-between; align-items:center; gap:8px;">
        <h3 style="margin:0;">Kişisel Öğrenme Planı (Haftalık)</h3>
        <div class="row" style="gap:8px;">
          <button id="planRegen" class="btn btn-secondary btn-sm" type="button">Yeniden Oluştur</button>
          <a href="/daily.html#shadowing" class="btn btn-secondary btn-sm">Shadowing</a>
          <a href="/daily.html#pronunciation" class="btn btn-secondary btn-sm">Telaffuz Koçu</a>
        </div>
      </div>
      <p class="subtle" id="planSubtitle" style="margin:6px 0 12px;">Seviye ve günlük hedefinize göre otomatik plan.</p>
      <div id="planList" class="grid" style="grid-template-columns: 1fr 1fr; gap:10px;"></div>
    </div>

    <div class="card" style="padding:16px; margin-top:16px;">
      <h3 style="margin:0 0 8px;">İlerleme ve Hedefler</h3>
      <div class="row" style="gap:8px; flex-wrap:wrap; align-items:center;">
        <span class="pill" id="streakBadge">Seri: 0 gün</span>
        <span class="pill" id="goalBadge">Günlük Hedef: 10 dk</span>
      </div>
      <div style="margin-top:10px;">
        <div style="height:10px; background:#0b1022; border:1px solid #1b2442; border-radius:999px; overflow:hidden;">
          <div id="goalProgress" style="height:100%; width:0%; background:linear-gradient(90deg, var(--brand), var(--neon)); transition: width .4s ease;"></div>
        </div>
        <div class="row" style="margin-top:8px; gap:8px; align-items:center;">
          <small class="subtle" id="goalText">0/10 dk</small>
          <label class="subtle" for="goalInput">Hedef</label>
          <input id="goalInput" type="number" min="1" max="300" value="10" style="width:90px; padding:8px 10px; border-radius:10px; background:#0b1022; border:1px solid #1b2442; color:var(--text);" />
          <button id="goalSave" class="btn btn-secondary" type="button">Kaydet</button>
          <small id="goalMsg" class="subtle"></small>
        </div>
      </div>
      <div style="margin-top:14px;">
        <h4 style="margin:0 0 6px; font-size:14px; color:#c7d2fe;">Rozetler</h4>
        <div id="achGrid" style="display:grid; grid-template-columns: repeat(6,minmax(60px,1fr)); gap:8px;"></div>
      </div>
    </div>

    <div class="card" style="padding:16px; margin-top:16px;">
      <h3 style="margin:0 0 8px;">Tercihler</h3>
      <div class="row" style="gap:8px; flex-wrap:wrap;">
        <select id="accLearnLang" style="flex:1; min-width:180px; padding:10px 12px; border-radius:10px; background:#0b1022; border:1px solid #1b2442; color:var(--text);"></select>
        <select id="accNativeLang" style="flex:1; min-width:180px; padding:10px 12px; border-radius:10px; background:#0b1022; border:1px solid #1b2442; color:var(--text);"></select>
        <select id="accVoice" style="flex:1; min-width:180px; padding:10px 12px; border-radius:10px; background:#0b1022; border:1px solid #1b2442; color:var(--text);">
          <option value="alloy">Alloy (varsayılan)</option>
          <option value="verse">Verse</option>
          <option value="aria">Aria</option>
          <option value="alto">Alto</option>
          <option value="soprano">Soprano</option>
          <option value="coral">Coral</option>
        </select>
        <select id="accCorrection" style="flex:1; min-width:180px; padding:10px 12px; border-radius:10px; background:#0b1022; border:1px solid #1b2442; color:var(--text);">
          <option value="gentle">Yumuşak</option>
          <option value="strict">Katı</option>
          <option value="off">Kapalı</option>
        </select>
        <button id="accSave" class="btn btn-primary btn-sm" type="button">Kaydet</button>
      </div>
      <div id="accMsg" class="subtle" style="margin-top:8px;"></div>
    </div>

    <!-- Logout section -->
    <div class="card" style="padding:16px; margin-top:16px;">
      <h3 style="margin:0 0 8px;">Oturum</h3>
      <div class="row" style="gap:8px; flex-wrap:wrap;">
        <button id="btnLogoutAccount" class="btn btn-secondary" type="button">Çıkış Yap</button>
      </div>
    </div>
  </main>

  <script src="/config.js"></script>
  <script type="module" src="/account.js"></script>
  <script src="/footer.js"></script>
</body>
</html>
